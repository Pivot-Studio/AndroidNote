- ## 进程/线程
	- ### 定义
		- 进程是资源分配的最小单位，线程是CPU调度的最小单位。
	- ### 地址空间
		- 进程之间是独立的地址空间，而线程共享本进程的地址空间。
	- ### 执行过程
		- 每个独立的进程有一个程序运行的入口，执行开销大。但是线程不能独立执行，必须依存在应用程序中，由应用程序提供多个线程执行控制，执行开销小。
	- ### 切换时
		- 进程切换时，消耗的资源大，线程有自己独立的程序计数器和数据空间，开销小。
	- ### 存活
		- 一个进程崩溃后，在保护模式下不会对其他进程产生影响，但是一个线程崩溃整个进程都死掉。
- ## 进程结构
	- ### 控制段PCB
		- 进程唯一标识
	- ### 数据段
		- 进程运行时使用的数据区域
	- ### 程序段
		- 进程执行的代码部分
- ## 进程状态
	- ![image.png](../assets/image_1676644467558_0.png)
	-
- ## 进程控制
	- ![计操_进程控制_1.png](../assets/计操_进程控制_1_1676647827946_0.png)
	- 通过[[原语]]进行进程控制
	- ### CPU调度
		- 当前进程数远远大于CPU数时，将CPU资源进行重新分配
		- 任务调度
			- 在作业提交到系统之后，等待系统分配资源时进行调度。
		- 进程调度
			- 在进程或线程运行期间动态地进行调度。
		- 内存调度
			- 将进程调入外存，合适时候再收回至内存
- ## 进程通信
	- 进程不能直接访问其他进程的地址空间
	- 共享存储
		- 共享数据结构，通过操作系统提供的同步机制，如锁、信号量、互斥量等来实现多个进程对数据结构的访问同步。效率低。
		- 共享内存存储区，直接在存储区中进行读写操作，需要注意[[进程同步/互斥]]问题。效率高
		- 适用于频繁进行数据通信的场景。
	- 消息传递
		- 直接通信，进程有自己专属的消息队列，用于接收其他进程的信息。
		- 广播，多用于点对多通信，实现方式多种多样。
		- 适用于需要保证数据通信可靠性，安全性的场景。
	- 管道通信
		- 管道本质是内存缓冲区
		- 字节流管道，管道是半双工，数据会按照 FIFO（先进先出）的顺序传输，默认是进程同步。
		- 适用于两进程间相关性较强的场景。
- ## 线程结构
	- ### 控制段TCB
		- 线程唯一标识
	- ### 线程相关资源
	- ### 线程栈
		- 线程执行任务时使用的栈空间
- ## 线程类型
	- ### 用户级线程
		- 由用户空间的线程库实现的，通过线程库本身的功能实现线程创建，销毁，切换，开销小。
		- 但是由于无法利用系统CPU资源，只可以占用一部分内存资源，所以无法实现[[多线程协同]]工作。
		- 一个用户级线程一旦发生阻塞，整个进程也会阻塞，因为用户级线程阻塞无法切换。
	- ### 内核级线程
		- 由操作系统内核实现的，通过内核完成线程创建，撤销，切换，开销比用户级线程大。
		- 可以利用系统资源，支持多线程协同工作。
		- 内核级线程发生阻塞，操作系统会将该线程的状态设置为阻塞状态，并将CPU资源分配给其他可以运行的线程。进行抢占式线程切换。
- ## 死锁
	- 死锁是指两个或两个以上的进程在执行过程中，由于竞争资源或者由于彼此通信而造成的一种阻塞的现象。
	- ### 死锁条件
		- #### 互斥条件
			- 一个资源每次只能被一个进程使用。
		- #### 请求与保持条件
			- 进程已经持有了至少一个资源，但又提出了新的资源请求时，该请求的资源已被其他进程占有，此时请求进程被阻塞，并对自己已获得的资源保持不放。
		- #### 不可剥夺条件
			- 进程所获得的资源在未使用完毕之前，不能被其他进程强行夺走，即只能由获得该资源的进程自己来释放（只能是主动释放)。
		- #### 循环等待条件
			- 若干进程间形成首尾相接循环等待资源的关系。
	- ### 避免死锁
		- 阻止进程在持有资源的同时申请其它资源。
		- 允许对资源实行抢夺。
		- 对系统所有资源进行线性排序并赋予不同的序号，这样我们便可以规定进程在申请资源时必须按照序号递增的顺序进行资源的申请，当以后要申请时需检查要申请的资源的编号大于当前编号时，才能进行申请。